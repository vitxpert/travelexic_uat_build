"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[319],{319:(Y,u,o)=>{o.r(u),o.d(u,{ChatPageModule:()=>U});var g=o(6895),_=o(4006),r=o(8058),l=o(3317),t=o(8256),p=o(1692),m=o(6775),d=o(1228),f=o(3646);function C(n,i){if(1&n&&t._UZ(0,"img",16),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.profile_image,t.LSH)}}function x(n,i){1&n&&t._UZ(0,"img",17)}function v(n,i){1&n&&(t.TgZ(0,"ion-badge",18),t._uU(1,"!"),t.qZA())}function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",11),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw(3);return t.KtG(h.openChat(c))}),t.TgZ(1,"ion-avatar",12),t.YNc(2,C,1,1,"img",13),t.YNc(3,x,1,0,"img",14),t.qZA(),t.TgZ(4,"ion-label"),t._uU(5),t.qZA(),t.YNc(6,v,2,0,"ion-badge",15),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("ngIf",e.profile_image),t.xp6(1),t.Q6J("ngIf",!e.profile_image),t.xp6(2),t.hij(" ",e.chat_name," "),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.last_msg_seen))}}function P(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",9),t.YNc(2,T,7,4,"ion-item",10),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.groups)}}function Z(n,i){if(1&n&&t._UZ(0,"img",16),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.profile_image,t.LSH)}}function b(n,i){1&n&&t._UZ(0,"img",17)}function M(n,i){1&n&&(t.TgZ(0,"ion-badge",18),t._uU(1,"!"),t.qZA())}function I(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",11),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw(3);return t.KtG(h.openChat(c))}),t.TgZ(1,"ion-avatar",12),t.YNc(2,Z,1,1,"img",13),t.YNc(3,b,1,0,"img",14),t.qZA(),t.TgZ(4,"ion-label"),t._uU(5),t.qZA(),t.YNc(6,M,2,0,"ion-badge",15),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("ngIf",e.profile_image),t.xp6(1),t.Q6J("ngIf",!e.profile_image),t.xp6(2),t.hij(" ",e.chat_name," "),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.last_msg_seen))}}function S(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",9),t.YNc(2,I,7,4,"ion-item",10),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.users)}}function J(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-searchbar",3),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.searchTerm=s)})("ionChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.search(s))}),t.qZA(),t.TgZ(2,"ion-segment",4,5),t.NdJ("ionChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.segmentChanged(s))}),t.TgZ(4,"ion-segment-button",6)(5,"ion-label"),t._uU(6,"Chat Groups"),t.qZA()(),t.TgZ(7,"ion-segment-button",7)(8,"ion-label"),t._uU(9,"Chat"),t.qZA()()(),t.TgZ(10,"div",8),t.YNc(11,P,3,1,"ng-container",2),t.YNc(12,S,3,1,"ng-container",2),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.searchTerm),t.xp6(10),t.Q6J("ngIf","groups"==e.activeSegment),t.xp6(1),t.Q6J("ngIf","users"==e.activeSegment)}}function O(n,i){1&n&&(t.ynx(0),t.TgZ(1,"h2",19),t._uU(2,"Chats Disabled for the group"),t.qZA(),t.BQk())}const Q=[{path:"",component:(()=>{class n{constructor(e,a,s,c){this.globalService=e,this.chatService=a,this.auth=s,this.router=c,this.searchTerm="",this.auth_token="",this.activeSegment="groups",this.groups=[],this.users=[],this.usersTmp=[],this.groupsTmp=[],this.config={pagination:!0,allowTouchMove:!1,height:400},this.name="",this.chat_status=!0,this.loadInitialData()}ngOnInit(){this.user_id=localStorage.getItem("ca_user_id"),this.auth.userLoggedIn.subscribe(e=>{null!=e&&(this.loadGroups(),this.loadUsers())}),this.globalService.groupSwitchEvent.subscribe(e=>{null!==e&&this.loadInitialData()}),this.globalService.hideChatNotiEvent.next("update")}ionViewDidEnter(){this.loadGroups(),this.loadUsers()}loadInitialData(){const e=JSON.parse(localStorage.getItem("user"))||"";this.actionGroup=localStorage.getItem("cc_selected_group_id"),e.forEach((a,s)=>{a.order_id===Number(this.actionGroup)&&(this.qrcodevalue=e[s].order_id.toString(),this.name=e[s].full_name.toString(),console.log(this.qrcodevalue.toString()))})}loadGroups(){this.user_id=localStorage.getItem("ca_user_id"),this.chatService.apiGetGroupList({user_id:this.user_id}).subscribe(e=>{this.groups=e.data,this.groupsTmp=e.data})}loadUsers(){this.user_id=localStorage.getItem("ca_user_id"),this.chatService.apiGetUsersList({user_id:this.user_id}).subscribe(e=>{this.users=e.data,this.usersTmp=e.data})}segmentChanged(e){"groups"===e.target.value?this.activeSegment="groups":"users"===e.target.value&&(this.activeSegment="users")}search(e){"groups"==this.activeSegment?this.groups=this.groupsTmp.filter(a=>a.chat_name.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1):this.users=this.usersTmp.filter(a=>a.chat_name.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1)}openChat(e){let a="";"groups"===this.activeSegment?(a="group",this.router.navigate(["app/chat/chat-screen/"+a+"/"+e.group_id+"/"+e.user_id])):(a="user",this.router.navigate(["app/chat/chat-screen/"+a+"/"+e.id+"/"+e.user_id]))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.U),t.Y36(m.a),t.Y36(d.e),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],decls:6,vars:3,consts:[["collapse","fade"],[3,"fullscreen"],[4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],["mode","ios","value","groups",3,"ionChange"],["segment",""],["value","groups"],["value","users"],[1,"swiper-content"],[1,"users-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],[3,"src",4,"ngIf"],["src","https://ionicframework.com/docs/img/demos/avatar.svg",4,"ngIf"],["color","danger","slot","end",4,"ngIf"],[3,"src"],["src","https://ionicframework.com/docs/img/demos/avatar.svg"],["color","danger","slot","end"],[1,"chat-h2"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar"),t._UZ(2,"app-header"),t.qZA()(),t.TgZ(3,"ion-content",1),t.YNc(4,J,13,3,"ng-container",2),t.YNc(5,O,3,0,"ng-container",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",a.chat_status),t.xp6(1),t.Q6J("ngIf",!a.chat_status))},dependencies:[g.sg,g.O5,_.JJ,_.On,r.BJ,r.yp,r.W2,r.Gu,r.Ie,r.Q$,r.VI,r.cJ,r.GO,r.sr,r.QI,r.j9,f.G],styles:[".menu-page[_ngcontent-%COMP%]{padding:10px}.menu-page[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:block;font-size:25px;margin-bottom:5px}.menu-page[_ngcontent-%COMP%]   .menu-box[_ngcontent-%COMP%]{padding:15px 10px;margin:0;box-shadow:0}.menu-page[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000}ion-content[_ngcontent-%COMP%]{--background: #f5f6f1}.notice-container[_ngcontent-%COMP%]{padding:5px;background:#fff;min-height:600px;border-radius:10px 10px 0 0}ion-badge[_ngcontent-%COMP%]{padding:5px 9px;border-radius:12px}.chat-h2[_ngcontent-%COMP%]{font-size:46px;border:2px dashed black;margin:40px;padding:33px;text-align:center;background:white}"]}),n})()},{path:"chat-screen/:type/:id/:fromId",loadChildren:()=>o.e(1820).then(o.bind(o,1820)).then(n=>n.ChatScreenPageModule)}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(Q),l.Bz]}),n})();var A=o(4546),G=o(983);let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,_.u5,r.Pc,N,A.O,G.NY]}),n})()}}]);