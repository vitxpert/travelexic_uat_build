"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8802],{8802:(K,_,c)=>{c.r(_),c.d(_,{LoginPageModule:()=>R});var m=c(6895),g=c(4006),r=c(8058),h=c(3317),u=c(655),p=c(7391),b=c(2340),v=c(5838),e=c(8256),x=c(5146),T=c(1228),P=c(1692),f=c(2440);const I=["modal"],C=["ngOtpInput"];function M(o,a){1&o&&e._UZ(0,"img",12)}function y(o,a){1&o&&e._UZ(0,"img",13)}function O(o,a){1&o&&e._UZ(0,"img",14)}function L(o,a){1&o&&e._UZ(0,"img",15)}function S(o,a){1&o&&e._UZ(0,"img",16)}function Z(o,a){1&o&&e._UZ(0,"img",17)}function w(o,a){1&o&&(e.TgZ(0,"h1"),e._uU(1,"LOGIN"),e.qZA())}function N(o,a){1&o&&(e.TgZ(0,"h1"),e._uU(1,"ENTER OTP"),e.qZA())}function A(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"ion-label")(2,"ion-checkbox",33),e.NdJ("ionChange",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.termsChkBoxEvent())}),e.qZA(),e._uU(3," I Agree To The "),e.TgZ(4,"span",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.openTerms())}),e._uU(5,"Terms and Conditions"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("checked",t.isTerms)}}function k(o,a){if(1&o&&(e.TgZ(0,"p",35),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function J(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",18),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"div",19)(2,"ion-row")(3,"ion-col",20)(4,"ion-item",21)(5,"div",22),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-col",23),e._UZ(8,"ion-input",24),e.qZA()(),e.TgZ(9,"p",25),e._uU(10,"OR"),e.qZA(),e.TgZ(11,"ion-row")(12,"ion-col",26),e._UZ(13,"ion-input",27),e.qZA()()(),e.YNc(14,A,6,1,"div",28),e.TgZ(15,"div",29),e.YNc(16,k,2,1,"p",30),e.qZA(),e.TgZ(17,"div",19)(18,"ion-button",31),e._uU(19),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.loginForm),e.xp6(4),e.Q6J("button",!0)("detail",!1),e.xp6(2),e.hij("+",t.selectedPhone,""),e.xp6(1),e.s9C("size","herbalife"===t.app?12:9),e.xp6(7),e.Q6J("ngIf",!t.OTP_box),e.xp6(2),e.Q6J("ngForOf",t.serverMessage),e.xp6(2),e.Q6J("disabled",t.submitDisabled),e.xp6(1),e.hij("","herbalife"===t.app?"Submit":"GET OTP"," ")}}const F=function(){return{standalone:!0}};function U(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"ng-otp-input",43,44),e.NdJ("onInputChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOtpChange(n))})("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.otp=n)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.otp)("config",t.config)("ngModelOptions",e.DdM(3,F))}}function G(o,a){if(1&o&&(e.TgZ(0,"p",25),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("Resend code in ",t.counter," seconds")}}function Q(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",19)(2,"div",36),e.YNc(3,U,2,4,"ng-otp-input",37),e.qZA(),e.TgZ(4,"div",38),e._uU(5),e.qZA()(),e.TgZ(6,"div",19)(7,"p",39),e._uU(8),e.qZA()(),e.TgZ(9,"div",19)(10,"ion-button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.verifyOtp())}),e._uU(11,"Verify"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"ion-button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resendOTP())}),e._uU(14,"Resend OTP "),e.qZA(),e.YNc(15,G,2,1,"p",42),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.OTP_box),e.xp6(2),e.hij("Test Mode OTP: ",t.testotp,""),e.xp6(3),e.AsE("An OTP has been sent to your number: ",t.mobile," and your email: ",t.email,""),e.xp6(2),e.Q6J("disabled",t.disabledVerify),e.xp6(3),e.Q6J("disabled",t.resendFlag),e.xp6(2),e.Q6J("ngIf",t.resendFlag)}}function D(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-item",51),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setCountryValue(s.id))}),e.TgZ(2,"ion-label"),e._uU(3),e.qZA(),e._UZ(4,"ion-radio",52),e.qZA(),e.BQk()}if(2&o){const t=a.$implicit;e.xp6(3),e.AsE("(+",t.id,") ",t.name,""),e.xp6(1),e.Q6J("value",t.id)}}function Y(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"ion-toolbar")(1,"ion-searchbar",45),e.NdJ("ionInput",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.searchbarInput(n))})("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.searchTerm=n)}),e.qZA()(),e.TgZ(2,"ion-content",46)(3,"ion-radio-group",47),e.NdJ("ionChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.checkboxChange(n))})("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedItems=n)}),e.YNc(4,D,5,3,"ng-container",48),e.qZA(),e.TgZ(5,"ion-infinite-scroll",49),e.NdJ("ionInfinite",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.loadMorePosts(n))}),e._UZ(6,"ion-infinite-scroll-content",50),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.searchTerm),e.xp6(2),e.Q6J("ngModel",t.selectedItems),e.xp6(1),e.Q6J("ngForOf",t.countries_data)}}const q=[{path:"",component:(()=>{class o{constructor(t,i,n,s,l,d,H){this.apiService=t,this.navCtrl=i,this.auth=n,this.globalService=s,this.platform=l,this.router=d,this.alertController=H,this.serverMessage=[],this.OTP_box=!1,this.response={},this.tenants=[],this.loginResponse={},this.validationMessages={mobile:[{type:"required",message:"Mobile no. is required"},{type:"minlength",message:"Mobile no is required"}]},this.isTerms=!1,this.app="",this.device_model="",this.device_version="",this.config={allowNumbersOnly:!0,length:6,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px",backgroundColor:"white"}},this.submitDisabled=!1,this.resendFlag=!1,this.counter=60,this.selectedPhone="91",this.selectedPhoneNumber="",this.items=[],this.title="Select Items",this.pagination=1,this.searchTerm="",this.verifyLoginToken="",this.disabledVerify=!1,this.testotp="",this.app=b.N.app,this.countriescode=p.dG,this.loadDeviceInfo()}ngOnInit(){this.countries_data=[],this.items=p.dG,this.workingSelectedValues=this.selectedItems,this.loginForm=new g.cw({distributorId:new g.NI("",g.kI.compose([g.kI.minLength(4)])),mobile:new g.NI("",g.kI.compose([g.kI.minLength(9)]))}),this.countries_data=this.globalService.staticPagination(p.dG,1)}startTimerr(){this.resendFlag=!0,this.counter=60,this.timer()}timer(){this.counter>=1?setTimeout(()=>{this.counter--,this.timer()},1e3):this.resendFlag=!1}loadDeviceInfo(){return(0,u.mG)(this,void 0,void 0,function*(){const t=yield v.A.getInfo();this.device_model=t.model,this.device_version=t.osVersion,console.log("Device Model: "+this.device_model),console.log("Device Version: "+this.device_version)})}ngAfterViewInit(){}onSubmit(){this.errorMessage=[],this.serverMessage=[],this.loginForm.valid?""!=this.loginForm.value.mobile||""!=this.loginForm.value.distributorId?this.isTerms?(this.globalService.presentLoading(),""==this.loginForm.value.mobile?(this.submitDisabled=!0,this.auth.distributorIdLogin({member_id:this.loginForm.value.distributorId,is_app_online:!0}).subscribe(i=>{var n,s,l;this.submitDisabled=!1,i.success&&0==i.data.is_registered?(localStorage.setItem("accessToken",i.data.security.accessToken),localStorage.setItem("subDomain",i.data.security.subDomain),localStorage.setItem("baseURL",i.data.security.base_url),this.globalService.baseURLEvent.next(i.data.security.base_url),this.globalService.accessTokenEvent.next(i.data.security.accessToken),this.disabledVerify=!0,this.globalService.presentToast("Logged in successfully."),localStorage.setItem("user_mobile",i.data.traveller.phone),localStorage.setItem("ca_user_id",i.data.traveller.id),this.router.navigate(["/loginDetail"])):(this.response=i,this.OTP_box=!0,this.API_OTP=i.data.otp,this.mobile=null===(n=i?.data)||void 0===n?void 0:n.phone,this.email=null===(s=i?.data)||void 0===s?void 0:s.email,this.selectedPhoneNumber=null===(l=i?.data)||void 0===l?void 0:l.phone)},i=>{console.log(i),this.globalService.showError(i.error.message)})):(this.submitDisabled=!0,this.auth.login({phone:this.loginForm.value.mobile}).subscribe(i=>{var n;this.submitDisabled=!1,i.success&&(this.startTimerr(),this.selectedPhoneNumber=this.loginForm.value.mobile,this.mobile="+"+this.selectedPhone+this.loginForm.value.mobile,this.email=null===(n=i?.data)||void 0===n?void 0:n.email,this.response=i,this.OTP_box=!0,this.API_OTP=i.data.otp,this.testotp=atob(i.data.otp),this.loginResponse=i.data,this.tenants=i.data.tenants)},i=>{console.log(i),this.submitDisabled=!1,this.globalService.showError(i.error.message)}))):this.globalService.showMessage("Please Agree on the Terms and condition"):this.globalService.showMessage("Please enter Mobile No. or Distributor ID."):this.loginForm.markAllAsTouched()}onOtpChange(t){6===t.length&&(this.otp=t)}reAssignOTP(){if(this.platform.is("ios")){const t=this.ngOtpInputRef.otpForm.value,i=Number(t.ctrl_0)+""+Number(t.ctrl_1)+Number(t.ctrl_2)+Number(t.ctrl_3)+Number(t.ctrl_4)+Number(t.ctrl_5);this.otp=i}}verifyOtp(){return(0,u.mG)(this,void 0,void 0,function*(){return this.reAssignOTP(),typeof this.otp>"u"?(this.globalService.presentToast("Plase enter otp"),!1):atob(this.API_OTP).toString()!==this.otp.toString()?(this.disabledVerify=!1,this.globalService.presentToast("Plase enter valid otp"),void(this.otp="")):(this.tenants.length>0?this.selectTenant():this.verifyOtpApi(),void this.otp.toString())})}selectTenant(){let t=[];var i=0;this.tenants.forEach((n,s)=>{n.groups.forEach((l,d)=>{t.push({type:"radio",label:l.group_name,value:n.tenant_id+"-"+l.group_id,checked:0===i}),i++})}),this.alertController.create({header:"Select Group",cssClass:"commonpopup",inputs:t,backdropDismiss:!1,buttons:[{text:"Done",handler:n=>{if(""!=n){const s=n.split("-");localStorage.setItem("selected_tenant_id",s[0]);const l={phone:this.selectedPhoneNumber,otp:this.otp.toString(),tenant_id:s[0],is_app_online:!0};this.auth.verifyOTP(l).subscribe(d=>{d.success&&(localStorage.setItem("accessToken",d.data.security.accessToken),localStorage.setItem("subDomain",d.data.security.subDomain),localStorage.setItem("baseURL",d.data.security.base_url),this.globalService.baseURLEvent.next(d.data.security.base_url),this.globalService.accessTokenEvent.next(d.data.security.accessToken),this.disabledVerify=!0,this.globalService.presentToast("Logged in successfully."),localStorage.setItem("user",JSON.stringify(d.data.traveller)),localStorage.setItem("user_mobile",d.data.traveller.phone),localStorage.setItem("ca_user_id",d.data.traveller.id),this.auth.userLoggedIn.next(d.data.traveller.name),this.navCtrl.navigateRoot(["/app/home/custom-form"]))})}}}]}).then(n=>{n.present()})}verifyOtpApi(){return(0,u.mG)(this,void 0,void 0,function*(){const t={phone:this.selectedPhoneNumber,otp:this.otp.toString(),is_app_online:!0};this.auth.verifyOTP(t).subscribe(i=>{i.success&&(localStorage.setItem("accessToken",i.data.security.accessToken),localStorage.setItem("subDomain",i.data.security.subDomain),localStorage.setItem("baseURL",i.data.security.base_url),this.globalService.baseURLEvent.next(i.data.security.base_url),this.globalService.accessTokenEvent.next(i.data.security.accessToken),this.disabledVerify=!0,this.globalService.presentToast("Logged in successfully."),localStorage.setItem("user",JSON.stringify(i.data.traveller)),localStorage.setItem("user_mobile",i.data.traveller.phone),localStorage.setItem("ca_user_id",i.data.traveller.id),this.auth.userLoggedIn.next(i.data.traveller.name),this.navCtrl.navigateRoot(["/app/home/custom-form"]))})})}getFcmTokenNoty(){const t=localStorage.getItem("ca_auth_key"),i=localStorage.getItem("ca_user_id"),n=localStorage.getItem("FCMTokenKey")||"";let s="ios";if(this.platform.is("android")&&(s="android"),this.platform.is("ios")&&(s="ios"),""!=n){const l=new FormData;l.append("auth",t),l.append("user_id",i),l.append("token_id",n),l.append("device",s),l.append("device_modal",this.device_model),l.append("device_version",this.device_version),""!=n&&this.apiService.getFcmToken(l).subscribe(d=>{console.log("notification fcm::::",d)})}}resendOTP(){this.resendFlag=!0,this.globalService.presentToast("OTP sent again"),this.onSubmit()}openTerms(){this.navCtrl.navigateForward(["/termsandcondition"])}termsChkBoxEvent(){this.isTerms=!this.isTerms}searchbarInput(t){this.searchTerm=t.target.value,this.filterList(t.target.value)}filterList(t){if(""===t)this.countries_data=[],this.countries_data=this.globalService.staticPagination(p.dG,1);else{const i=t.toLowerCase();this.countries_data=this.items.filter(n=>n.name.toLowerCase().indexOf(i.toLowerCase())>-1||n.id.toLowerCase().indexOf(i.toLowerCase())>-1)}}loadPagination(){this.globalService.staticPagination(p.dG,this.pagination).forEach(i=>{this.countries_data.push(i)}),this.pagination++}loadMorePosts(t){""===this.searchTerm&&this.loadPagination(),t.target.complete()}setCountryValue(t){this.selectedPhone=t,this.pagination=1,this.searchTerm="",this.countries_data=this.globalService.staticPagination(p.dG,this.pagination),this.modal.dismiss()}checkboxChange(t){const{value:n}=t.detail;this.workingSelectedValues=n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.s),e.Y36(r.SH),e.Y36(T.e),e.Y36(P.U),e.Y36(r.t4),e.Y36(h.F0),e.Y36(r.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],viewQuery:function(t,i){if(1&t&&(e.Gf(I,7),e.Gf(C,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.modal=n.first),e.iGM(n=e.CRH())&&(i.ngOtpInputRef=n.first)}},decls:16,vars:10,consts:[[1,"login-box",2,"margin","0px auto"],[2,"padding","30px"],["src","assets/images/header-new.png","style","position:relative;width: 80%;margin-bottom: 10px;margin-top:20px;",4,"ngIf"],["src","assets/images/NewLogin.png","style","position:relative;margin-top:20px;",4,"ngIf"],["src","assets/images/AdionaLogo2.png","style","position:relative;width:150px;margin-bottom: 20px;margin-top: 30px;",4,"ngIf"],["src","assets/images/tc-logo-new.png","style","position:relative;width:250px;margin-bottom: 20px;margin-top: 50px;",4,"ngIf"],["src","assets/images/herbalife.png","style","position:relative;width:250px;margin-bottom: 20px;margin-top: 50px;",4,"ngIf"],["src","assets/images/tbi-logo.png","style","position:relative;margin-top:70px;width:150px",4,"ngIf"],[4,"ngIf"],["class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],["trigger","select-country","id","datemodal"],["modal",""],["src","assets/images/header-new.png",2,"position","relative","width","80%","margin-bottom","10px","margin-top","20px"],["src","assets/images/NewLogin.png",2,"position","relative","margin-top","20px"],["src","assets/images/AdionaLogo2.png",2,"position","relative","width","150px","margin-bottom","20px","margin-top","30px"],["src","assets/images/tc-logo-new.png",2,"position","relative","width","250px","margin-bottom","20px","margin-top","50px"],["src","assets/images/herbalife.png",2,"position","relative","width","250px","margin-bottom","20px","margin-top","50px"],["src","assets/images/tbi-logo.png",2,"position","relative","margin-top","70px","width","150px"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["size","3"],["id","select-country",2,"border","1px #ddd solid","height","50px",3,"button","detail"],["slot","end"],[3,"size"],["formControlName","mobile","placeholder","Mobile No.","type","text"],[2,"text-align","center"],["size","12"],["formControlName","distributorId","placeholder","Distributor ID","type","text"],["style","margin-bottom: 5%;",4,"ngIf"],[1,"error-message"],["class","error",4,"ngFor","ngForOf"],["id","submitButton","type","submit",1,"secondary-btn",3,"disabled"],[2,"margin-bottom","5%"],[3,"checked","ionChange"],[1,"terms",3,"click"],[1,"error"],[2,"text-align","center","margin-bottom","10px"],["ngDefaultControl","","required","",3,"ngModel","config","ngModelOptions","onInputChange","ngModelChange",4,"ngIf"],[2,"background-color","white","padding","20px","text-align","center","width","100%"],[2,"padding","0px 20px"],["id","submitButton","type","button",1,"secondary-btn",3,"disabled","click"],[1,"secondary-btn",2,"margin-top","20px","clear","both",3,"disabled","click"],["style","text-align: center;",4,"ngIf"],["ngDefaultControl","","required","",3,"ngModel","config","ngModelOptions","onInputChange","ngModelChange"],["ngOtpInput",""],[3,"ngModel","ionInput","ngModelChange"],[1,"ion-padding"],["value","end",3,"ngModel","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading..."],[3,"click"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),e.YNc(3,M,1,0,"img",2),e.YNc(4,y,1,0,"img",3),e.YNc(5,O,1,0,"img",4),e.YNc(6,L,1,0,"img",5),e.YNc(7,S,1,0,"img",6),e.YNc(8,Z,1,0,"img",7),e.qZA(),e.YNc(9,w,2,0,"h1",8),e.YNc(10,N,2,0,"h1",8),e.YNc(11,J,20,9,"form",9),e.YNc(12,Q,16,7,"div",8),e.qZA()(),e.TgZ(13,"ion-modal",10,11),e.YNc(15,Y,7,3,"ng-template"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","sotc"===i.app),e.xp6(1),e.Q6J("ngIf","urplan"===i.app),e.xp6(1),e.Q6J("ngIf","adiona"===i.app),e.xp6(1),e.Q6J("ngIf","tc"===i.app),e.xp6(1),e.Q6J("ngIf","herbalife"===i.app),e.xp6(1),e.Q6J("ngIf","tbi"===i.app),e.xp6(1),e.Q6J("ngIf",!i.OTP_box),e.xp6(1),e.Q6J("ngIf",i.OTP_box),e.xp6(1),e.Q6J("ngIf",!i.OTP_box),e.xp6(1),e.Q6J("ngIf",i.OTP_box))},dependencies:[m.sg,m.O5,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.On,r.YG,r.nz,r.wI,r.W2,r.ju,r.MB,r.pK,r.Ie,r.Q$,r.B7,r.se,r.Nd,r.VI,r.sr,r.ki,r.w,r.U5,r.QI,r.j9,g.sg,g.u,f.df],styles:[".placeholder[_ngcontent-%COMP%]{font-size:15px}ion-select[_ngcontent-%COMP%]{height:70px}ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%]{text-align:left;border-radius:5px!important;background-color:#fff!important;font-size:16px!important;z-index:1!important;width:100%;border:1px solid #ddd;padding-top:0!important;padding-bottom:0!important;padding-left:10px!important;height:50px}.login-form[_ngcontent-%COMP%]{padding:27px 20px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 0;--padding-start: 0;--padding-end: 0}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}ion-content[_ngcontent-%COMP%]{text-align:center}.error-message[_ngcontent-%COMP%]{color:red}.terms[_ngcontent-%COMP%]{color:#00f;text-decoration:underline}ion-modal[_ngcontent-%COMP%]::part(content){background:rgba(0,0,0,0)!important}.login-box[_ngcontent-%COMP%]{width:450px}@media only screen and (max-width: 768px){.login-box[_ngcontent-%COMP%]{width:100%}}"]}),o})()}];let E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(q),h.Bz]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,g.u5,r.Pc,E,g.UX,f.Xz]}),o})()}}]);